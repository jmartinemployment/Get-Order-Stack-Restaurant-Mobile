# GetOrderStack Mobile - Session Handoff
**Date:** January 20, 2026  
**Project:** React Native Mobile Apps (POS, KDS)

---

## QUICK START FOR NEW SESSION

```
I'm continuing GetOrderStack Mobile. The project is at:
/Users/jam/development/Get-Order-Stack-Restaurant-Mobile

Priority: Build POS app first. KDS is deprioritized.
Expo SDK 54 installed. 0 vulnerabilities.
```

---

## âœ… RESOLVED: NPM Issues

**Upgraded to Expo SDK 54** - fixes tar vulnerability

**Added overrides** in root `package.json` to fix memory leak:
```json
"overrides": {
  "glob": "^10.3.10",
  "inflight": "npm:lru-cache@^10.2.0"
}
```

**Current status:**
```
npm audit: found 0 vulnerabilities
```

Only remaining warning is `rimraf@3.0.2` deprecation (cosmetic, no security issue).

---

## ğŸ“ PROJECT STRUCTURE

```
Get-Order-Stack-Restaurant-Mobile/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ pos/           â† PRIORITY 1 (Empty - needs building)
â”‚   â””â”€â”€ kds/           â† DEPRIORITIZED (basic implementation exists)
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/            â† Shared React Native components âœ…
â”‚   â”œâ”€â”€ api/           â† API client & WebSocket âœ…
â”‚   â””â”€â”€ models/        â† TypeScript types âœ…
â”œâ”€â”€ package.json       â† Workspace root (Expo SDK 54)
â””â”€â”€ docs/
    â””â”€â”€ HANDOFF-2026-01-20.md
```

---

## âœ… COMPLETED (Shared Packages)

### @get-order-stack/models
Location: `packages/models/src/index.ts`

```typescript
// Types available:
OrderStatus = 'pending' | 'confirmed' | 'preparing' | 'ready' | 'completed' | 'cancelled'
OrderType = 'pickup' | 'delivery' | 'dine-in'
PaymentStatus = 'pending' | 'paid' | 'failed' | 'refunded'
Order, OrderItem, Customer, Restaurant, MenuItem, MenuCategory
ApiResponse<T>, WebSocketEvent<T>
```

### @get-order-stack/api
Location: `packages/api/src/index.ts`

```typescript
// Available exports:
setApiBaseUrl(url: string)        // Configure backend URL
getApiBaseUrl(): string

ordersApi.getOrders(restaurantId, status?)
ordersApi.getActiveOrders(restaurantId)
ordersApi.getOrder(restaurantId, orderId)
ordersApi.updateOrderStatus(restaurantId, orderId, status, reason?)
ordersApi.startPreparing(restaurantId, orderId)
ordersApi.markReady(restaurantId, orderId)
ordersApi.completeOrder(restaurantId, orderId)

orderWebSocket.connect(restaurantId)
orderWebSocket.disconnect()
orderWebSocket.subscribe(callback) // Returns unsubscribe function
```

### @get-order-stack/ui
Location: `packages/ui/src/`

```typescript
// Components:
<OrderCard order={} elapsedMinutes={} onBump={} bumpLabel="" />
<StatusBadge status="confirmed" size="md" />

// Theme:
import { colors, spacing, typography, borderRadius, shadows } from '@get-order-stack/ui'
```

---

## ğŸ¯ PRIORITY 1: BUILD POS APP

### What POS Needs

The POS (Point of Sale) app is for restaurant staff to:
1. Browse menu categories and items
2. Add items to cart (with modifiers)
3. Create orders (dine-in, pickup, delivery)
4. Process payments (Stripe integration ready in backend)

### Suggested POS Screens

```
apps/pos/
â”œâ”€â”€ App.tsx
â”œâ”€â”€ app.json
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ MenuScreen.tsx         â† Browse categories/items
â”‚   â”‚   â”œâ”€â”€ ItemDetailScreen.tsx   â† Select modifiers, add to cart
â”‚   â”‚   â”œâ”€â”€ CartScreen.tsx         â† Review order, customer info
â”‚   â”‚   â”œâ”€â”€ CheckoutScreen.tsx     â† Payment processing
â”‚   â”‚   â””â”€â”€ OrdersScreen.tsx       â† View active orders
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ MenuCategoryTabs.tsx
â”‚   â”‚   â”œâ”€â”€ MenuItemCard.tsx
â”‚   â”‚   â”œâ”€â”€ ModifierSelector.tsx
â”‚   â”‚   â”œâ”€â”€ CartItem.tsx
â”‚   â”‚   â””â”€â”€ NumericKeypad.tsx      â† For entering quantities
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â””â”€â”€ CartContext.tsx        â† Cart state management
â”‚   â””â”€â”€ navigation/
â”‚       â””â”€â”€ AppNavigator.tsx       â† React Navigation setup
```

### Backend API Endpoints for POS

```bash
# Menu
GET /:restaurantId/menu                    # Full menu with categories/items/modifiers
GET /:restaurantId/menu/items/:itemId      # Single item with modifiers

# Orders
POST /:restaurantId/orders                 # Create order
GET /:restaurantId/orders                  # List orders
PATCH /:restaurantId/orders/:orderId/status

# Payments
POST /:restaurantId/orders/:orderId/payment-intent  # Get Stripe client secret
```

### Create Order Request Body

```json
{
  "customerInfo": {
    "firstName": "John",
    "lastName": "Doe",
    "email": "john@example.com",
    "phone": "555-1234"
  },
  "orderType": "pickup",
  "orderSource": "pos",
  "items": [
    {
      "menuItemId": "uuid",
      "quantity": 2,
      "specialInstructions": "No onions",
      "modifiers": [
        { "modifierId": "uuid" }
      ]
    }
  ],
  "specialInstructions": "Call when ready"
}
```

---

## ğŸ“‹ KDS STATUS (Deprioritized)

Location: `apps/kds/`

**What's Done:**
- Basic 3-column Kanban (NEW â†’ COOKING â†’ READY)
- Mock data display
- Bump button functionality (local state only)
- Elapsed time with urgent highlighting
- Updated to Expo SDK 54

**What's Missing:**
- Real API connection (using mock data)
- WebSocket integration
- Not using shared @get-order-stack/ui components
- No error handling

**Note:** KDS works visually but isn't connected to the backend.

---

## ğŸ”Œ BACKEND REFERENCE

**Backend Location:** `/Users/jam/development/Get-Order-Stack-Restaurant-Backend`

**Run Backend:**
```bash
cd /Users/jam/development/Get-Order-Stack-Restaurant-Backend
npm run dev
```

**Test Data:**
```
Restaurant ID: 96816829-87e3-4b6a-9f6c-613e4b3ab522
Slug: test-orlando
Tax Rate: 6.5%

Sample MenuItem ID: 612ba048-5777-44fa-92ae-39092246af45
Name: Cuban Sandwich
Price: $12.00
```

**Stripe Test Card:** `4242 4242 4242 4242` (any future date, any CVC)

---

## ğŸ› ï¸ DEVELOPMENT COMMANDS

```bash
# Install dependencies
cd /Users/jam/development/Get-Order-Stack-Restaurant-Mobile
npm install

# Run POS app (once created)
npm run pos
# or
cd apps/pos && npx expo start

# Run KDS app
npm run kds

# Run on Android
npm run pos:android
npm run kds:android
```

---

## ğŸ“¦ CURRENT VERSIONS (Expo SDK 54)

**Root package.json:**
- typescript: ~5.3.3
- overrides for glob and inflight (memory leak fix)

**KDS app (apps/kds/package.json):**
- expo: ~54.0.0
- expo-status-bar: ~2.2.0
- react: 18.3.1
- react-native: 0.77.1

**For POS app, use same versions.**

---

## ğŸ¨ DESIGN NOTES

- Dark theme: `#1a1a2e` background, `#16213e` surface
- Accent color: `#e94560`
- Status colors defined in `packages/ui/src/theme.ts`
- Landscape orientation for tablets
- Touch-friendly large buttons for POS

---

## ğŸ“ DEV PREFERENCES

- TypeScript always
- Step-by-step with review
- Bash commands without comments
- Expo managed workflow
- React Navigation for routing

---

## RELATED PROJECTS

| Project | Location | Purpose |
|---------|----------|---------|
| Backend API | `/Users/jam/development/Get-Order-Stack-Restaurant-Backend` | Express + Prisma + Stripe |
| Frontend (Angular) | `/Users/jam/development/Get-Order-Stack-Restaurant-Frontend` | Customer ordering widgets |
| Mobile Apps | `/Users/jam/development/Get-Order-Stack-Restaurant-Mobile` | This project |
